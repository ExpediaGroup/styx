---

jvmRouteName: "${jvm.route:noJvmRouteSet}"

proxy:
  connectors:
    http:
      port: 8080
  bossThreadsCount: 1
  clientWorkerThreadsCount: 0
  workerThreadsCount: 0
  tcpNoDelay: true
  nioReuseAddress: true
  nioKeepAlive: true
  maxInitialLength: 4096
  maxHeaderSize: 8192
  maxChunkSize: 8192
  maxContentLength: 65536
  requestTimeoutMillis: 12000
  keepAliveTimeoutMillis: 12000
  maxConnectionsCount: 4096

admin:
  connectors:
    http:
      port: 9000
  bossThreadsCount: 1
  workerThreadsCount: 1
  tcpNoDelay: true
  nioReuseAddress: true
  nioKeepAlive: true
  maxInitialLength: 4096
  maxHeaderSize: 8192
  maxChunkSize: 8192
  maxContentLength: 65536
  metricsCache:
    enabled: true
    expirationMillis: 10000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config:
        originsFile: "${originsFile:classpath:conf/origins.yml}"

    jmx:
      class: "com.hotels.styx.metrics.reporting.jmx.JmxReporterServiceFactory"
      config:
        domain: "com.hotels.styx"

retrypolicy:
  policy:
    factory:
      class: "com.hotels.styx.client.retry.RetryPolicyFactory"
      config: {count: 2}

loadBalancing:
  strategy:
    factory: {class: "com.hotels.styx.client.loadbalancing.strategies.BusyConnectionsStrategy$Factory"}
